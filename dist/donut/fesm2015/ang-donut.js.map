{"version":3,"file":"ang-donut.js","sources":["ng://ang-donut/lib/donut.service.ts","ng://ang-donut/lib/donut.component.ts","ng://ang-donut/lib/donut.module.ts","ng://ang-donut/public-api.ts","ng://ang-donut/ang-donut.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Donut } from './donut.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DonutService {\n\n  public sum: number;\n  constructor() { }\n\n  public getProcessedData(donutData: Donut[]): Donut[] {\n    this.sum = this.fetchSum(donutData);\n    donutData = this.calculatePercentages(donutData, this.sum);\n    donutData = this.calculateDashArrays(donutData);\n    donutData = this.getOffsets(donutData);\n    return donutData;\n  }\n\n\n  private calculateDashArrays(donutData: Donut[]): Donut[] {\n    donutData.forEach(data => {\n      data.strokeDasharray = this.getDasharrayString(data.percentage);\n    });\n    return donutData;\n  }\n\n  private calculatePercentages(donutData: Donut[], sum: number): Donut[] {\n    donutData.forEach(data => {\n      data.percentage = this.getRoundedPercentage(parseInt(data.value), sum);\n    });\n    return donutData;\n  }\n\n  private fetchSum(donutData: Donut[]): number {\n    return donutData.map(d => parseInt(d.value)).reduce((a, b) => a + b, 0);\n  }\n\n  private getRoundedPercentage(numerator: number, denominator: number): number {\n    if (!denominator) {\n      return 0;\n    }\n    return (Math.round(((numerator / denominator) * 100) * 10) / 10);\n  }\n\n  private getDasharrayString(dash: number): string {\n    return dash + ' ' + (100 - dash);\n  }\n\n  private getOffsets(donutData: Donut[]): Donut[] {\n    let firstOffset = 0;\n    let sumTillNow = 0;\n    donutData.forEach((data, i) => {\n      if (i === 0) {\n        data.strokeOffset = 0;\n        sumTillNow = data.percentage;\n      } else {\n        data.strokeOffset = 100 - sumTillNow;\n        sumTillNow += data.percentage;\n\n      }\n    });\n    return donutData;\n  }\n}\n","import { Component, OnInit, Input, ViewChild, ElementRef, AfterViewInit } from '@angular/core';\nimport { DonutService } from './donut.service';\nimport { Donut } from './donut.model';\n\n@Component({\n  selector: 'ng-donut',\n  templateUrl: './donut.component.html',\n  styleUrls: ['./donut.component.scss']\n})\nexport class DonutComponent implements OnInit, AfterViewInit {\n\n  public strokeWidth: number;\n  public innerLabelText: string;\n  public _showLegend: boolean;\n  public sum: number;\n  public _showTotal: boolean;\n  public width: number;\n  public height: number;\n  @ViewChild('parent') parent: ElementRef;\n  // Should total be shown inside Donut\n  @Input() set showTotal(value: boolean) {\n    if (value && value === true) {\n      this._showTotal = true;\n    }\n    else {\n      this._showTotal = false;\n    }\n  }\n  @Input() set showLegend(value: boolean) {\n    if (value && value === true) {\n      this._showLegend = true;\n    }\n    else {\n      this._showLegend = false;\n    }\n  }\n  @Input() set dim(value: number[]) {\n    if (value) {\n      this.height = value[0];\n      this.width = value[1];\n\n    }\n\n  }\n  // Data which needs to be rendered\n  @Input() donutData: Donut[];\n  // Inner Label text\n  @Input() set innerLabel(value: string) {\n    if (value) {\n      this.innerLabelText = value;\n    }\n    else {\n      this.innerLabelText = null;\n    }\n  }\n\n\n  constructor(private donutService: DonutService) { }\n\n  ngOnInit() {\n    // this.fetchFakeData();\n    this.donutData = this.donutService.getProcessedData(this.donutData);\n    //Settings Start // Need to bind these to input variables later\n    this.strokeWidth = 3;\n    this.sum = this.donutService.sum;\n    // this.showLegend = false;\n    //Settings End\n\n  \n  }\n\n  ngAfterViewInit() {\n      //Set Dim\n      this.parent.nativeElement.style.height = this.height + 'px';\n      this.parent.nativeElement.style.width = this.width + 'px';\n\n  }\n  fetchFakeData() {\n    this.donutData = [\n      { name: 'Red', value: '20', color: '#E25325' },\n      { name: 'Blue', value: '30', color: '#6064CF' },\n      { name: 'Black', value: '10', color: '#5A5C59' },\n      { name: 'Green', value: '40', color: '#50FD1D' }\n    ];\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { DonutComponent } from './donut.component';\nimport { CommonModule } from '@angular/common';\n\n\n\n@NgModule({\n  declarations: [DonutComponent],\n  imports: [CommonModule],\n  exports: [DonutComponent]\n})\nexport class DonutModule { }\n","/*\n * Public API Surface of donut\n */\n\nexport * from './lib/donut.service';\nexport * from './lib/donut.component';\nexport * from './lib/donut.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}