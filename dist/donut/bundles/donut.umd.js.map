{"version":3,"file":"donut.umd.js","sources":["ng://donut/lib/donut.service.ts","ng://donut/lib/donut.component.html","ng://donut/lib/donut.component.ts","ng://donut/lib/donut.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Donut } from './donut.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DonutService {\n\n  public sum: number;\n  constructor() { }\n\n  public getProcessedData(donutData: Donut[]): Donut[] {\n    this.sum = this.fetchSum(donutData);\n    donutData = this.calculatePercentages(donutData, this.sum);\n    donutData = this.calculateDashArrays(donutData);\n    donutData = this.getOffsets(donutData);\n    return donutData;\n  }\n\n\n  private calculateDashArrays(donutData: Donut[]): Donut[] {\n    donutData.forEach(data => {\n      data.strokeDasharray = this.getDasharrayString(data.percentage);\n    });\n    return donutData;\n  }\n\n  private calculatePercentages(donutData: Donut[], sum: number): Donut[] {\n    donutData.forEach(data => {\n      data.percentage = this.getRoundedPercentage(parseInt(data.value), sum);\n    });\n    return donutData;\n  }\n\n  private fetchSum(donutData: Donut[]): number {\n    return donutData.map(d => parseInt(d.value)).reduce((a, b) => a + b, 0);\n  }\n\n  private getRoundedPercentage(numerator: number, denominator: number): number {\n    if (!denominator) {\n      return 0;\n    }\n    return (Math.round(((numerator / denominator) * 100) * 10) / 10);\n  }\n\n  private getDasharrayString(dash: number): string {\n    return dash + ' ' + (100 - dash);\n  }\n\n  private getOffsets(donutData: Donut[]): Donut[] {\n    let firstOffset = 0;\n    let sumTillNow = 0;\n    donutData.forEach((data, i) => {\n      if (i === 0) {\n        data.strokeOffset = 0;\n        sumTillNow = data.percentage;\n      } else {\n        data.strokeOffset = 100 - sumTillNow;\n        sumTillNow += data.percentage;\n\n      }\n    });\n    return donutData;\n  }\n}\n","<div #parent>\r\n    <figure class='figure-class'>\r\n      <div class=\"figure-content\" fxFlex='57%'>\r\n        <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 42 42\" class=\"donut\" aria-labelledby=\"beers-title beers-desc\"\r\n          role=\"img\">\r\n          <circle class=\"donut-hole\" cx=\"21\" cy=\"21\" r=\"15.91549430918954\" fill=\"#fff\" role=\"presentation\"></circle>\r\n          <circle class=\"donut-ring\" cx=\"21\" cy=\"21\" r=\"15.91549430918954\" fill=\"transparent\" stroke=\"#d2d3d4\"\r\n            stroke-width=\"3\" role=\"presentation\"></circle>\r\n  \r\n          <circle *ngFor=\"let data of donutData;\" class=\"donut-segment\" cx=\"21\" cy=\"21\" r=\"15.91549430918954\"\r\n            fill=\"transparent\" [style.stroke]=\"data.color\" [style.stroke-width]=\"strokeWidth\" [style.stroke-dasharray]=\"data.strokeDasharray\"\r\n            [style.stroke-dashoffset]=\"data.strokeOffset\" aria-labelledby=\"donut-segment-1-title donut-segment-1-desc\">\r\n          </circle>\r\n          <!-- unused 10% -->\r\n          <g class=\"chart-text\">\r\n            <text *ngIf='innerLabelText' x=\"50%\" y=\"50%\" class=\"chart-label\">\r\n              {{innerLabelText}}\r\n            </text>\r\n            <text *ngIf='_showTotal' x=\"50%\" y=\"50%\" class=\"chart-number\">\r\n              {{sum}}\r\n            </text>\r\n          </g>\r\n        </svg>\r\n      </div>\r\n      <div class=\"figure-key\" fxFlex='43%'>\r\n      <figcaption>\r\n        <ul class=\"figure-key-list\" aria-hidden=\"true\" role=\"presentation\">\r\n          <li *ngFor=\"let data of donutData;\">\r\n            <span class=\"shape-circle\" [style.background-color]=\"data.color\"></span><b>{{data.name}} </b>\r\n            <span class=\"donut-data-count-percentage\">\r\n              {{data.value}}({{data.percentage}}%)\r\n            </span>\r\n          </li>\r\n          <!-- <li>\r\n            <span class=\"shape-circle shape-blue\"></span><b> Pend. Audit </b>\r\n            <span class=\"donut-data-count-percentage\">\r\n              {{1}}({{1}}%)\r\n            </span>\r\n          </li>\r\n          <li>\r\n            <span class=\"shape-circle shape-orange\"></span> <b>Audit In Prog.</b>\r\n            <span class=\"donut-data-count-percentage\">\r\n              {{1}}({{1}}%)\r\n            </span>\r\n          </li>\r\n          <li>\r\n            <span class=\"shape-circle shape-red\"></span> <b>Needs Review</b>\r\n            <span class=\"donut-data-count-percentage\">\r\n              {{1}}({{1}}%)\r\n            </span>\r\n          </li>\r\n          <li>\r\n            <span class=\"shape-circle shape-green\"></span> <b>Audit Cmplt </b>\r\n            <span class=\"donut-data-count-percentage\">\r\n              {{1}}({{1}}%)\r\n            </span>\r\n          </li> -->\r\n        </ul>\r\n      </figcaption>\r\n    </div>\r\n    </figure>\r\n  </div>","import { Component, OnInit, Input, ViewChild, ElementRef, AfterViewInit } from '@angular/core';\nimport { DonutService } from './donut.service';\nimport { Donut } from './donut.model';\n\n@Component({\n  selector: 'ng-donut',\n  templateUrl: './donut.component.html',\n  styleUrls: ['./donut.component.scss']\n})\nexport class DonutComponent implements OnInit, AfterViewInit {\n\n  public strokeWidth: number;\n  public innerLabelText: string;\n  public showLegend: boolean;\n  public sum: number;\n  public _showTotal: boolean;\n  public width: number;\n  public height: number;\n  @ViewChild('parent') parent: ElementRef;\n  // Should total be shown inside Donut\n  @Input() set showTotal(value: boolean) {\n    if (value && value === true) {\n      this._showTotal = true;\n    }\n    else {\n      this._showTotal = false;\n    }\n  }\n  @Input() set dim(value: number[]) {\n    if (value) {\n      this.height = value[0];\n      this.width = value[1];\n\n    }\n\n  }\n  // Data which needs to be rendered\n  @Input() donutData: Donut[];\n  // Inner Label text\n  @Input() set innerLabel(value: string) {\n    if (value) {\n      this.innerLabelText = value;\n    }\n    else {\n      this.innerLabelText = null;\n    }\n  }\n\n\n  constructor(private donutService: DonutService) { }\n\n  ngOnInit() {\n    // this.fetchFakeData();\n    this.donutData = this.donutService.getProcessedData(this.donutData);\n    //Settings Start // Need to bind these to input variables later\n    this.strokeWidth = 3;\n    this.sum = this.donutService.sum;\n    this.showLegend = false;\n    //Settings End\n\n  \n  }\n\n  ngAfterViewInit() {\n      //Set Dim\n      this.parent.nativeElement.style.height = this.height + 'px';\n      this.parent.nativeElement.style.width = this.width + 'px';\n\n  }\n  fetchFakeData() {\n    this.donutData = [\n      { name: 'Red', value: '20', color: '#E25325' },\n      { name: 'Blue', value: '30', color: '#6064CF' },\n      { name: 'Black', value: '10', color: '#5A5C59' },\n      { name: 'Green', value: '40', color: '#50FD1D' }\n    ];\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { DonutComponent } from './donut.component';\nimport { CommonModule } from '@angular/common';\n\n\n\n@NgModule({\n  declarations: [DonutComponent],\n  imports: [CommonModule],\n  exports: [DonutComponent]\n})\nexport class DonutModule { }\n"],"names":["Injectable","i0.ɵɵelement","i0.ɵɵstyleProp","i0.ɵɵelementStart","i0.ɵɵtext","i0.ɵɵelementEnd","i0.ɵɵadvance","i0.ɵɵtextInterpolate1","i0.ɵɵtextInterpolate2","i0.ɵɵnamespaceSVG","i0.ɵɵtemplate","i0.ɵɵnamespaceHTML","i0.ɵɵproperty","Component","ViewChild","Input","CommonModule","NgModule"],"mappings":"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"}